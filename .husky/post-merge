#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

changed_files="$(git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD)"
check_run() {
    if echo "$changed_files" | grep -q "$1"; then
        echo "ü¶Ñ –ù–∞–π–¥–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ $1, –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
        eval "$2"
    else
        echo "‚ú® –í $1 –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–µ –±—É–¥–µ–º –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏"
    fi
}

check_run package.json "yarn && yarn lerna bootstrap"
check_run packages/shared "yarn shared:build"
check_run packages/engine "yarn shared:build"